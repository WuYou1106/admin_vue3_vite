import{_ as g,I as x,b as S,v as w,K as I,r as m,o as B,f as b,h as v,p as A,l as E}from"./index-e29c914f.js";const q=s=>(A("data-v-712d5bf4"),s=s(),E(),s),R={class:"container"},P=q(()=>v("canvas",{class:"cvs",id:"myCanvas"},null,-1)),U={__name:"index",setup(s){const y=x();S(()=>{C(),i()}),w(y,(a,e)=>{const{fullPath:n,meta:d,name:u,params:p,path:t,query:l}=a;t=="/audio/view"&&location.reload()}),I(()=>{console.log("onUnmounted")});const r=m(!1),c=m(null);let o=null;const f=()=>{if(r.value)return;let a=document.getElementById("myAudio"),e=new AudioContext;o=e.createAnalyser();let n=e.createMediaElementSource(a);o.fftSize=512,c.value=new Uint8Array(o.frequencyBinCount),n.connect(o),o.connect(e.destination),r.value=!0},i=()=>{let a=document.getElementById("myCanvas");if(!a)return;let e=a.getContext("2d");requestAnimationFrame(i);const{width:n,height:d}=a;if(e.clearRect(0,0,n,d),!r.value)return;o.getByteFrequencyData(c.value);const u=c.value.length/2.5,p=n/u;let t=e.createLinearGradient(0,0,n,0);t.addColorStop(.1,"red"),t.addColorStop(.2,"orange"),t.addColorStop(.4,"yellow"),t.addColorStop(.5,"green"),t.addColorStop(.6,"cyan"),t.addColorStop(.7,"blue"),t.addColorStop(.8,"purple"),e.fillStyle=t;for(let l=0;l<u;l++){const _=c.value[l]/255*d,h=d-_;e.fillRect(l*4,h,p,_)}},C=()=>{document.getElementById("myCanvas").getContext("2d").fillRect(10,10,280,100)};return(a,e)=>(B(),b("div",R,[P,v("audio",{class:"audio",src:"../src/assets/demo.wav",controls:"",onPlay:f,id:"myAudio"},null,32)]))}},M=g(U,[["__scopeId","data-v-712d5bf4"]]);export{M as default};
