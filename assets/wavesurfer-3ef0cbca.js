import{J as ue,_ as ve,e as pe,o as le,f as fe,h as ie,a as Z,w as ee,q as J,u as ye}from"./index-e29c914f.js";var ae={},me={get exports(){return ae},set exports(q){ae=q}};/*!
 * wavesurfer.js 6.6.3 (2023-04-04)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(q,G){(function(Y,H){q.exports=H()})(self,()=>(()=>{var Q={"./src/drawer.canvasentry.js":(V,v,O)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var C=R(O("./src/util/style.js")),T=R(O("./src/util/get-id.js"));function R(o){return o&&o.__esModule?o:{default:o}}function x(o){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},x(o)}function W(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function L(o,l){for(var p=0;p<l.length;p++){var d=l[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,b(d.key),d)}}function _(o,l,p){return l&&L(o.prototype,l),p&&L(o,p),Object.defineProperty(o,"prototype",{writable:!1}),o}function b(o){var l=m(o,"string");return x(l)==="symbol"?l:String(l)}function m(o,l){if(x(o)!=="object"||o===null)return o;var p=o[Symbol.toPrimitive];if(p!==void 0){var d=p.call(o,l||"default");if(x(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(o)}var u=function(){function o(){W(this,o),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,T.default)(typeof this.constructor.name<"u"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return _(o,[{key:"initWave",value:function(p){this.wave=p,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(p){this.progress=p,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(p,d,k,w){this.start=this.wave.offsetLeft/d||0,this.end=this.start+p/d,this.wave.width=k,this.wave.height=w;var E={width:p+"px"};(0,C.default)(this.wave,E),this.hasProgressCanvas&&(this.progress.width=k,this.progress.height=w,(0,C.default)(this.progress,E))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(p,d){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,p),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,d))}},{key:"getFillStyle",value:function(p,d){if(typeof d=="string"||d instanceof CanvasGradient)return d;var k=p.createLinearGradient(0,0,0,p.canvas.height);return d.forEach(function(w,E){return k.addColorStop(E/d.length,w)}),k}},{key:"applyCanvasTransforms",value:function(p){p&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(p,d,k,w,E){this.fillRectToContext(this.waveCtx,p,d,k,w,E),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,p,d,k,w,E)}},{key:"fillRectToContext",value:function(p,d,k,w,E,g){p&&(g?this.drawRoundedRect(p,d,k,w,E,g):p.fillRect(d,k,w,E))}},{key:"drawRoundedRect",value:function(p,d,k,w,E,g){E!==0&&(E<0&&(E*=-1,k-=E),p.beginPath(),p.moveTo(d+g,k),p.lineTo(d+w-g,k),p.quadraticCurveTo(d+w,k,d+w,k+g),p.lineTo(d+w,k+E-g),p.quadraticCurveTo(d+w,k+E,d+w-g,k+E),p.lineTo(d+g,k+E),p.quadraticCurveTo(d,k+E,d,k+E-g),p.lineTo(d,k+g),p.quadraticCurveTo(d,k,d+g,k),p.closePath(),p.fill())}},{key:"drawLines",value:function(p,d,k,w,E,g){this.drawLineToContext(this.waveCtx,p,d,k,w,E,g),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,p,d,k,w,E,g)}},{key:"drawLineToContext",value:function(p,d,k,w,E,g,y){if(p){var A=d.length/2,c=Math.round(A*this.start),n=Math.round(A*this.end)+1,i=c,f=n,r=this.wave.width/(f-i-1),t=w+E,s=k/w;p.beginPath(),p.moveTo((i-c)*r,t),p.lineTo((i-c)*r,t-Math.round((d[2*i]||0)/s));var a,e,h;for(a=i;a<f;a++)e=d[2*a]||0,h=Math.round(e/s),p.lineTo((a-c)*r+this.halfPixel,t-h);var P=f-1;for(P;P>=i;P--)e=d[2*P+1]||0,h=Math.round(e/s),p.lineTo((P-c)*r+this.halfPixel,t-h);p.lineTo((i-c)*r,t-Math.round((d[2*i+1]||0)/s)),p.closePath(),p.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(p,d,k){var w=this;if(k==="blob")return new Promise(function(E){w.wave.toBlob(E,p,d)});if(k==="dataURL")return this.wave.toDataURL(p,d)}}]),o}();v.default=u,V.exports=v.default},"./src/drawer.js":(V,v,O)=>{function C(g){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},C(g)}Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var T=x(O("./src/util/index.js"));function R(g){if(typeof WeakMap!="function")return null;var y=new WeakMap,A=new WeakMap;return(R=function(n){return n?A:y})(g)}function x(g,y){if(!y&&g&&g.__esModule)return g;if(g===null||C(g)!=="object"&&typeof g!="function")return{default:g};var A=R(y);if(A&&A.has(g))return A.get(g);var c={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in g)if(i!=="default"&&Object.prototype.hasOwnProperty.call(g,i)){var f=n?Object.getOwnPropertyDescriptor(g,i):null;f&&(f.get||f.set)?Object.defineProperty(c,i,f):c[i]=g[i]}return c.default=g,A&&A.set(g,c),c}function W(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function L(g,y){for(var A=0;A<y.length;A++){var c=y[A];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,b(c.key),c)}}function _(g,y,A){return y&&L(g.prototype,y),A&&L(g,A),Object.defineProperty(g,"prototype",{writable:!1}),g}function b(g){var y=m(g,"string");return C(y)==="symbol"?y:String(y)}function m(g,y){if(C(g)!=="object"||g===null)return g;var A=g[Symbol.toPrimitive];if(A!==void 0){var c=A.call(g,y||"default");if(C(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}function u(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),y&&o(g,y)}function o(g,y){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,n){return c.__proto__=n,c},o(g,y)}function l(g){var y=k();return function(){var c=w(g),n;if(y){var i=w(this).constructor;n=Reflect.construct(c,arguments,i)}else n=c.apply(this,arguments);return p(this,n)}}function p(g,y){if(y&&(C(y)==="object"||typeof y=="function"))return y;if(y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(g)}function d(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(g){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},w(g)}var E=function(g){u(A,g);var y=l(A);function A(c,n){var i;return W(this,A),i=y.call(this),i.container=T.withOrientation(c,n.vertical),i.params=n,i.width=0,i.height=n.height*i.params.pixelRatio,i.lastPos=0,i.wrapper=null,i}return _(A,[{key:"style",value:function(n,i){return T.style(n,i)}},{key:"createWrapper",value:function(){this.wrapper=T.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(n,i){!i&&n.preventDefault();var f=T.withOrientation(n.targetTouches?n.targetTouches[0]:n,this.params.vertical).clientX,r=this.wrapper.getBoundingClientRect(),t=this.width,s=this.getWidth(),a=this.getProgressPixels(r,f),e;return!this.params.fillParent&&t<s?e=a*(this.params.pixelRatio/t)||0:e=(a+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,T.clamp(e,0,1)}},{key:"getProgressPixels",value:function(n,i){return this.params.rtl?n.right-i:i-n.left}},{key:"setupWrapperEvents",value:function(){var n=this;this.wrapper.addEventListener("click",function(i){var f=T.withOrientation(i,n.params.vertical),r=n.wrapper.offsetHeight-n.wrapper.clientHeight;if(r!==0){var t=n.wrapper.getBoundingClientRect();if(f.clientY>=t.bottom-r)return}n.params.interact&&n.fireEvent("click",i,n.handleEvent(i))}),this.wrapper.addEventListener("dblclick",function(i){n.params.interact&&n.fireEvent("dblclick",i,n.handleEvent(i))}),this.wrapper.addEventListener("scroll",function(i){return n.fireEvent("scroll",i)})}},{key:"drawPeaks",value:function(n,i,f,r){this.setWidth(i)||this.clearWave(),this.params.barWidth?this.drawBars(n,0,f,r):this.drawWave(n,0,f,r)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(n){var i=this.wrapper.scrollWidth*n;this.recenterOnPosition(i,!0)}},{key:"recenterOnPosition",value:function(n,i){var f=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),t=this.wrapper.scrollWidth-this.wrapper.clientWidth,s=n-r,a=s-f;if(t!=0){if(!i&&-r<=a&&a<r){var e=this.params.autoCenterRate;e/=r,e*=t,a=Math.max(-e,Math.min(e,a)),s=f+a}s=Math.max(0,Math.min(t,s)),s!=f&&(this.wrapper.scrollLeft=s)}}},{key:"getScrollX",value:function(){var n=0;if(this.wrapper){var i=this.params.pixelRatio;if(n=Math.round(this.wrapper.scrollLeft*i),this.params.scrollParent){var f=~~(this.wrapper.scrollWidth*i-this.getWidth());n=Math.min(f,Math.max(0,n))}}return n}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(n){if(this.width==n)return!1;if(this.width=n,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var i=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:i})}return this.updateSize(),!0}},{key:"setHeight",value:function(n){return n==this.height?!1:(this.height=n,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(n){var i=1/this.params.pixelRatio,f=Math.round(n*this.width)*i;if(f<this.lastPos||f-this.lastPos>=i){if(this.lastPos=f,this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*n);this.recenterOnPosition(r,this.params.autoCenterImmediately)}this.updateProgress(f)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(n,i,f,r){}},{key:"drawWave",value:function(n,i,f,r){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(n){}}]),A}(T.Observer);v.default=E,V.exports=v.default},"./src/drawer.multicanvas.js":(V,v,O)=>{function C(c){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},C(c)}Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var T=_(O("./src/drawer.js")),R=L(O("./src/util/index.js")),x=_(O("./src/drawer.canvasentry.js"));function W(c){if(typeof WeakMap!="function")return null;var n=new WeakMap,i=new WeakMap;return(W=function(r){return r?i:n})(c)}function L(c,n){if(!n&&c&&c.__esModule)return c;if(c===null||C(c)!=="object"&&typeof c!="function")return{default:c};var i=W(n);if(i&&i.has(c))return i.get(c);var f={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in c)if(t!=="default"&&Object.prototype.hasOwnProperty.call(c,t)){var s=r?Object.getOwnPropertyDescriptor(c,t):null;s&&(s.get||s.set)?Object.defineProperty(f,t,s):f[t]=c[t]}return f.default=c,i&&i.set(c,f),f}function _(c){return c&&c.__esModule?c:{default:c}}function b(c,n){if(!(c instanceof n))throw new TypeError("Cannot call a class as a function")}function m(c,n){for(var i=0;i<n.length;i++){var f=n[i];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,o(f.key),f)}}function u(c,n,i){return n&&m(c.prototype,n),i&&m(c,i),Object.defineProperty(c,"prototype",{writable:!1}),c}function o(c){var n=l(c,"string");return C(n)==="symbol"?n:String(n)}function l(c,n){if(C(c)!=="object"||c===null)return c;var i=c[Symbol.toPrimitive];if(i!==void 0){var f=i.call(c,n||"default");if(C(f)!=="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(c)}function p(c,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(n&&n.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),n&&d(c,n)}function d(c,n){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,r){return f.__proto__=r,f},d(c,n)}function k(c){var n=g();return function(){var f=y(c),r;if(n){var t=y(this).constructor;r=Reflect.construct(f,arguments,t)}else r=f.apply(this,arguments);return w(this,r)}}function w(c,n){if(n&&(C(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(c)}function E(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(c){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},y(c)}var A=function(c){p(i,c);var n=k(i);function i(f,r){var t;return b(this,i),t=n.call(this,f,r),t.maxCanvasWidth=r.maxCanvasWidth,t.maxCanvasElementWidth=Math.round(r.maxCanvasWidth/r.pixelRatio),t.hasProgressCanvas=r.waveColor!=r.progressColor,t.halfPixel=.5/r.pixelRatio,t.canvases=[],t.progressWave=null,t.EntryClass=x.default,t.canvasContextAttributes=r.drawingContextAttributes,t.overlap=2*Math.ceil(r.pixelRatio/2),t.barRadius=r.barRadius||0,t.vertical=r.vertical,t}return u(i,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=R.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var r=this,t=Math.round(this.width/this.params.pixelRatio),s=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<s;)this.addCanvas();for(;this.canvases.length>s;)this.removeCanvas();var a=this.maxCanvasWidth+this.overlap,e=this.canvases.length-1;this.canvases.forEach(function(h,P){P==e&&(a=r.width-r.maxCanvasWidth*e),r.updateDimensions(h,a,r.height),h.clearWave()})}},{key:"addCanvas",value:function(){var r=new this.EntryClass;r.canvasContextAttributes=this.canvasContextAttributes,r.hasProgressCanvas=this.hasProgressCanvas,r.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,s=R.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(s,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),r.initWave(s),this.hasProgressCanvas){var a=R.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(a,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),r.initProgress(a)}this.canvases.push(r)}},{key:"removeCanvas",value:function(){var r=this.canvases[this.canvases.length-1];r.wave.parentElement.removeChild(r.wave.domElement),this.hasProgressCanvas&&r.progress.parentElement.removeChild(r.progress.domElement),r&&(r.destroy(),r=null),this.canvases.pop()}},{key:"updateDimensions",value:function(r,t,s){var a=Math.round(t/this.params.pixelRatio),e=Math.round(this.width/this.params.pixelRatio);r.updateDimensions(a,e,t,s),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var r=this;R.frame(function(){r.canvases.forEach(function(t){return t.clearWave()})})()}},{key:"drawBars",value:function(r,t,s,a){var e=this;return this.prepareDraw(r,t,s,a,function(h){var P=h.absmax,S=h.hasMinVals;h.height;var M=h.offsetY,j=h.halfH,I=h.peaks,D=h.channelIndex;if(s!==void 0){var N=S?2:1,z=I.length/N,B=e.params.barWidth*e.params.pixelRatio,X=e.params.barGap===null?Math.max(e.params.pixelRatio,~~(B/2)):Math.max(e.params.pixelRatio,e.params.barGap*e.params.pixelRatio),F=B+X,U=z/e.width,ce=s,he=a,$=ce;for($;$<he;$+=F){var re=0,ne=Math.floor($*U)*N,de=Math.floor(($+F)*U)*N;do{var oe=Math.abs(I[ne]);oe>re&&(re=oe),ne+=N}while(ne<de);var te=Math.round(re/P*j);e.params.barMinHeight&&(te=Math.max(te,e.params.barMinHeight)),e.fillRect($+e.halfPixel,j-te+M,B+e.halfPixel,te*2,e.barRadius,D)}}})}},{key:"drawWave",value:function(r,t,s,a){var e=this;return this.prepareDraw(r,t,s,a,function(h){var P=h.absmax,S=h.hasMinVals;h.height;var M=h.offsetY,j=h.halfH,I=h.peaks,D=h.channelIndex;if(!S){var N=[],z=I.length,B=0;for(B;B<z;B++)N[2*B]=I[B],N[2*B+1]=-I[B];I=N}s!==void 0&&e.drawLine(I,P,j,M,s,a,D),e.fillRect(0,j+M-e.halfPixel,e.width,e.halfPixel,e.barRadius,D)})}},{key:"drawLine",value:function(r,t,s,a,e,h,P){var S=this,M=this.params.splitChannelsOptions.channelColors[P]||{},j=M.waveColor,I=M.progressColor;this.canvases.forEach(function(D,N){S.setFillStyles(D,j,I),S.applyCanvasTransforms(D,S.params.vertical),D.drawLines(r,t,s,a,e,h)})}},{key:"fillRect",value:function(r,t,s,a,e,h){var P=Math.floor(r/this.maxCanvasWidth),S=Math.min(Math.ceil((r+s)/this.maxCanvasWidth)+1,this.canvases.length),M=P;for(M;M<S;M++){var j=this.canvases[M],I=M*this.maxCanvasWidth,D={x1:Math.max(r,M*this.maxCanvasWidth),y1:t,x2:Math.min(r+s,M*this.maxCanvasWidth+j.wave.width),y2:t+a};if(D.x1<D.x2){var N=this.params.splitChannelsOptions.channelColors[h]||{},z=N.waveColor,B=N.progressColor;this.setFillStyles(j,z,B),this.applyCanvasTransforms(j,this.params.vertical),j.fillRects(D.x1-I,D.y1,D.x2-D.x1,D.y2-D.y1,e)}}}},{key:"hideChannel",value:function(r){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(r)}},{key:"prepareDraw",value:function(r,t,s,a,e,h,P){var S=this;return R.frame(function(){if(r[0]instanceof Array){var M=r;if(S.params.splitChannels){var j=M.filter(function(F,U){return!S.hideChannel(U)});S.params.splitChannelsOptions.overlay||S.setHeight(Math.max(j.length,1)*S.params.height*S.params.pixelRatio);var I;return S.params.splitChannelsOptions&&S.params.splitChannelsOptions.relativeNormalization&&(I=R.max(M.map(function(F){return R.absMax(F)}))),M.forEach(function(F,U){return S.prepareDraw(F,U,s,a,e,j.indexOf(F),I)})}r=M[0]}if(!S.hideChannel(t)){var D=1/S.params.barHeight;S.params.normalize&&(D=P===void 0?R.absMax(r):P);var N=[].some.call(r,function(F){return F<0}),z=S.params.height*S.params.pixelRatio,B=z/2,X=z*h||0;return S.params.splitChannelsOptions&&S.params.splitChannelsOptions.overlay&&(X=0),e({absmax:D,hasMinVals:N,height:z,offsetY:X,halfH:B,peaks:r,channelIndex:t})}})()}},{key:"setFillStyles",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;r.setFillStyles(t,s)}},{key:"applyCanvasTransforms",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.applyCanvasTransforms(t)}},{key:"getImage",value:function(r,t,s){if(s==="blob")return Promise.all(this.canvases.map(function(e){return e.getImage(r,t,s)}));if(s==="dataURL"){var a=this.canvases.map(function(e){return e.getImage(r,t,s)});return a.length>1?a:a[0]}}},{key:"updateProgress",value:function(r){this.style(this.progressWave,{width:r+"px"})}}]),i}(T.default);v.default=A,V.exports=v.default},"./src/mediaelement-webaudio.js":(V,v,O)=>{function C(y){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},C(y)}Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var T=R(O("./src/mediaelement.js"));function R(y){return y&&y.__esModule?y:{default:y}}function x(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}function W(y,A){for(var c=0;c<A.length;c++){var n=A[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(y,_(n.key),n)}}function L(y,A,c){return A&&W(y.prototype,A),c&&W(y,c),Object.defineProperty(y,"prototype",{writable:!1}),y}function _(y){var A=b(y,"string");return C(A)==="symbol"?A:String(A)}function b(y,A){if(C(y)!=="object"||y===null)return y;var c=y[Symbol.toPrimitive];if(c!==void 0){var n=c.call(y,A||"default");if(C(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(y)}function m(){return typeof Reflect<"u"&&Reflect.get?m=Reflect.get.bind():m=function(A,c,n){var i=u(A,c);if(i){var f=Object.getOwnPropertyDescriptor(i,c);return f.get?f.get.call(arguments.length<3?A:n):f.value}},m.apply(this,arguments)}function u(y,A){for(;!Object.prototype.hasOwnProperty.call(y,A)&&(y=E(y),y!==null););return y}function o(y,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),A&&l(y,A)}function l(y,A){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},l(y,A)}function p(y){var A=w();return function(){var n=E(y),i;if(A){var f=E(this).constructor;i=Reflect.construct(n,arguments,f)}else i=n.apply(this,arguments);return d(this,i)}}function d(y,A){if(A&&(C(A)==="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(y)}function k(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(y){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},E(y)}var g=function(y){o(c,y);var A=p(c);function c(n){var i;return x(this,c),i=A.call(this,n),i.params=n,i.sourceMediaElement=null,i}return L(c,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(i,f,r){m(E(c.prototype),"_load",this).call(this,i,f,r),this.createMediaElementSource(i)}},{key:"createMediaElementSource",value:function(i){this.sourceMediaElement=this.ac.createMediaElementSource(i),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(i,f){return this.resumeAudioContext(),m(E(c.prototype),"play",this).call(this,i,f)}},{key:"destroy",value:function(){m(E(c.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),c}(T.default);v.default=g,V.exports=v.default},"./src/mediaelement.js":(V,v,O)=>{function C(n){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},C(n)}Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var T=L(O("./src/webaudio.js")),R=W(O("./src/util/index.js"));function x(n){if(typeof WeakMap!="function")return null;var i=new WeakMap,f=new WeakMap;return(x=function(t){return t?f:i})(n)}function W(n,i){if(!i&&n&&n.__esModule)return n;if(n===null||C(n)!=="object"&&typeof n!="function")return{default:n};var f=x(i);if(f&&f.has(n))return f.get(n);var r={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=t?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=n[s]}return r.default=n,f&&f.set(n,r),r}function L(n){return n&&n.__esModule?n:{default:n}}function _(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function b(n,i){for(var f=0;f<i.length;f++){var r=i[f];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,u(r.key),r)}}function m(n,i,f){return i&&b(n.prototype,i),f&&b(n,f),Object.defineProperty(n,"prototype",{writable:!1}),n}function u(n){var i=o(n,"string");return C(i)==="symbol"?i:String(i)}function o(n,i){if(C(n)!=="object"||n===null)return n;var f=n[Symbol.toPrimitive];if(f!==void 0){var r=f.call(n,i||"default");if(C(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}function l(){return typeof Reflect<"u"&&Reflect.get?l=Reflect.get.bind():l=function(i,f,r){var t=p(i,f);if(t){var s=Object.getOwnPropertyDescriptor(t,f);return s.get?s.get.call(arguments.length<3?i:r):s.value}},l.apply(this,arguments)}function p(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=A(n),n!==null););return n}function d(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&k(n,i)}function k(n,i){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},k(n,i)}function w(n){var i=y();return function(){var r=A(n),t;if(i){var s=A(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return E(this,t)}}function E(n,i){if(i&&(C(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(n)}function g(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(n){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},A(n)}var c=function(n){d(f,n);var i=w(f);function f(r){var t;return _(this,f),t=i.call(this,r),t.params=r,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=r.mediaType.toLowerCase(),t.elementPosition=r.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return m(f,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var t=this;this.mediaListeners.error=function(){t.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){t.fireEvent("waiting")},this.mediaListeners.canplay=function(){t.fireEvent("canplay")},this.mediaListeners.ended=function(){t.fireEvent("finish")},this.mediaListeners.play=function(){t.fireEvent("play")},this.mediaListeners.pause=function(){t.fireEvent("pause")},this.mediaListeners.seeked=function(s){t.fireEvent("seek")},this.mediaListeners.volumechange=function(s){t.isMuted=t.media.muted,t.isMuted?t.volume=0:t.volume=t.media.volume,t.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(s){t.media.removeEventListener(s,t.mediaListeners[s]),t.media.addEventListener(s,t.mediaListeners[s])})}},{key:"createTimer",value:function(){var t=this,s=function a(){t.isPaused()||(t.fireEvent("audioprocess",t.getCurrentTime()),R.frame(a)())};this.on("play",s),this.on("pause",function(){t.fireEvent("audioprocess",t.getCurrentTime())})}},{key:"load",value:function(t,s,a,e){var h=document.createElement(this.mediaType);h.controls=this.params.mediaControls,h.autoplay=this.params.autoplay||!1,h.preload=e??"auto",h.src=t,h.style.width="100%";var P=s.querySelector(this.mediaType);P&&s.removeChild(P),s.appendChild(h),this._load(h,a,e)}},{key:"loadElt",value:function(t,s){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,s,t.preload)}},{key:"_load",value:function(t,s,a){if(!(t instanceof HTMLMediaElement)||typeof t.addEventListener>"u")throw new Error("media parameter is not a valid media element");typeof t.load=="function"&&!(s&&a=="none")&&t.load(),this.media=t,this._setupMediaListeners(),this.peaks=s,this.onPlayEnd=null,this.buffer=null,this.isMuted=t.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return t>=1/0&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(t){t!=null&&!isNaN(t)&&(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function(t,s){this.seekTo(t);var a=this.media.play();return s&&this.setPlayEnd(s),a}},{key:"pause",value:function(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function(t){var s=this;this.clearPlayEnd(),this._onPlayEnd=function(a){a>=t&&(s.pause(),s.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(t,s,a){return this.buffer?l(A(f.prototype),"getPeaks",this).call(this,t,s,a):this.peaks||[]}},{key:"setSinkId",value:function(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(t){this.volume=t,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(t){this.isMuted=this.media.muted=t}},{key:"destroy",value:function(){var t=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(s){t.media&&t.media.removeEventListener(s,t.mediaListeners[s])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),f}(T.default);v.default=c,V.exports=v.default},"./src/peakcache.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;function O(_){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},O(_)}function C(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")}function T(_,b){for(var m=0;m<b.length;m++){var u=b[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(_,x(u.key),u)}}function R(_,b,m){return b&&T(_.prototype,b),m&&T(_,m),Object.defineProperty(_,"prototype",{writable:!1}),_}function x(_){var b=W(_,"string");return O(b)==="symbol"?b:String(b)}function W(_,b){if(O(_)!=="object"||_===null)return _;var m=_[Symbol.toPrimitive];if(m!==void 0){var u=m.call(_,b||"default");if(O(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(_)}var L=function(){function _(){C(this,_),this.clearPeakCache()}return R(_,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(m,u,o){m!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=m);for(var l=[],p=0;p<this.peakCacheRanges.length&&this.peakCacheRanges[p]<u;)p++;for(p%2==0&&l.push(u);p<this.peakCacheRanges.length&&this.peakCacheRanges[p]<=o;)l.push(this.peakCacheRanges[p]),p++;p%2==0&&l.push(o),l=l.filter(function(k,w,E){return w==0?k!=E[w+1]:w==E.length-1?k!=E[w-1]:k!=E[w-1]&&k!=E[w+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(l),this.peakCacheRanges=this.peakCacheRanges.sort(function(k,w){return k-w}).filter(function(k,w,E){return w==0?k!=E[w+1]:w==E.length-1?k!=E[w-1]:k!=E[w-1]&&k!=E[w+1]});var d=[];for(p=0;p<l.length;p+=2)d.push([l[p],l[p+1]]);return d}},{key:"getCacheRanges",value:function(){var m=[],u;for(u=0;u<this.peakCacheRanges.length;u+=2)m.push([this.peakCacheRanges[u],this.peakCacheRanges[u+1]]);return m}}]),_}();v.default=L,V.exports=v.default},"./src/util/absMax.js":(V,v,O)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=x;var C=R(O("./src/util/max.js")),T=R(O("./src/util/min.js"));function R(W){return W&&W.__esModule?W:{default:W}}function x(W){var L=(0,C.default)(W),_=(0,T.default)(W);return-_>L?-_:L}V.exports=v.default},"./src/util/clamp.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=O;function O(C,T,R){return Math.min(Math.max(T,C),R)}V.exports=v.default},"./src/util/fetch.js":(V,v,O)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=u;var C=T(O("./src/util/observer.js"));function T(o){return o&&o.__esModule?o:{default:o}}function R(o){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},R(o)}function x(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function W(o,l){for(var p=0;p<l.length;p++){var d=l[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,_(d.key),d)}}function L(o,l,p){return l&&W(o.prototype,l),p&&W(o,p),Object.defineProperty(o,"prototype",{writable:!1}),o}function _(o){var l=b(o,"string");return R(l)==="symbol"?l:String(l)}function b(o,l){if(R(o)!=="object"||o===null)return o;var p=o[Symbol.toPrimitive];if(p!==void 0){var d=p.call(o,l||"default");if(R(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(o)}var m=function(){function o(l,p,d){x(this,o),this.instance=l,this.instance._reader=d.body.getReader(),this.total=parseInt(p,10),this.loaded=0}return L(o,[{key:"start",value:function(p){var d=this,k=function w(){d.instance._reader.read().then(function(E){var g=E.done,y=E.value;if(g){d.total===0&&d.instance.onProgress.call(d.instance,{loaded:d.loaded,total:d.total,lengthComputable:!1}),p.close();return}d.loaded+=y.byteLength,d.instance.onProgress.call(d.instance,{loaded:d.loaded,total:d.total,lengthComputable:d.total!==0}),p.enqueue(y),w()}).catch(function(E){p.error(E)})};k()}}]),o}();function u(o){if(o){if(!o.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var l=new C.default,p=new Headers,d=new Request(o.url);l.controller=new AbortController,o&&o.requestHeaders&&o.requestHeaders.forEach(function(E){p.append(E.key,E.value)});var k=o.responseType||"json",w={method:o.method||"GET",headers:p,mode:o.mode||"cors",credentials:o.credentials||"same-origin",cache:o.cache||"default",redirect:o.redirect||"follow",referrer:o.referrer||"client",signal:l.controller.signal};return fetch(d,w).then(function(E){l.response=E;var g=!0;E.body||(g=!1);var y=E.headers.get("content-length");return y===null&&(g=!1),g?(l.onProgress=function(A){l.fireEvent("progress",A)},new Response(new ReadableStream(new m(l,y,E)),w)):E}).then(function(E){var g;if(E.ok)switch(k){case"arraybuffer":return E.arrayBuffer();case"json":return E.json();case"blob":return E.blob();case"text":return E.text();default:g="Unknown responseType: "+k;break}throw g||(g="HTTP error status: "+E.status),new Error(g)}).then(function(E){l.fireEvent("success",E)}).catch(function(E){l.fireEvent("error",E)}),l.fetchRequest=d,l}V.exports=v.default},"./src/util/frame.js":(V,v,O)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=R;var C=T(O("./src/util/request-animation-frame.js"));function T(x){return x&&x.__esModule?x:{default:x}}function R(x){return function(){for(var W=arguments.length,L=new Array(W),_=0;_<W;_++)L[_]=arguments[_];return(0,C.default)(function(){return x.apply(void 0,L)})}}V.exports=v.default},"./src/util/get-id.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=O;function O(C){return C===void 0&&(C="wavesurfer_"),C+Math.random().toString(32).substring(2)}V.exports=v.default},"./src/util/index.js":(V,v,O)=>{Object.defineProperty(v,"__esModule",{value:!0}),Object.defineProperty(v,"Observer",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(v,"absMax",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(v,"clamp",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(v,"debounce",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(v,"fetchFile",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(v,"frame",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(v,"getId",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(v,"ignoreSilenceMode",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(v,"max",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(v,"min",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(v,"preventClick",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(v,"requestAnimationFrame",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(v,"style",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(v,"withOrientation",{enumerable:!0,get:function(){return p.default}});var C=k(O("./src/util/get-id.js")),T=k(O("./src/util/max.js")),R=k(O("./src/util/min.js")),x=k(O("./src/util/absMax.js")),W=k(O("./src/util/observer.js")),L=k(O("./src/util/style.js")),_=k(O("./src/util/request-animation-frame.js")),b=k(O("./src/util/frame.js")),m=k(O("./node_modules/debounce/index.js")),u=k(O("./src/util/prevent-click.js")),o=k(O("./src/util/fetch.js")),l=k(O("./src/util/clamp.js")),p=k(O("./src/util/orientation.js")),d=k(O("./src/util/silence-mode.js"));function k(w){return w&&w.__esModule?w:{default:w}}},"./src/util/max.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=O;function O(C){var T=-1/0;return Object.keys(C).forEach(function(R){C[R]>T&&(T=C[R])}),T}V.exports=v.default},"./src/util/min.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=O;function O(C){var T=1/0;return Object.keys(C).forEach(function(R){C[R]<T&&(T=C[R])}),T}V.exports=v.default},"./src/util/observer.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;function O(_){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},O(_)}function C(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")}function T(_,b){for(var m=0;m<b.length;m++){var u=b[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(_,x(u.key),u)}}function R(_,b,m){return b&&T(_.prototype,b),m&&T(_,m),Object.defineProperty(_,"prototype",{writable:!1}),_}function x(_){var b=W(_,"string");return O(b)==="symbol"?b:String(b)}function W(_,b){if(O(_)!=="object"||_===null)return _;var m=_[Symbol.toPrimitive];if(m!==void 0){var u=m.call(_,b||"default");if(O(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(_)}var L=function(){function _(){C(this,_),this._disabledEventEmissions=[],this.handlers=null}return R(_,[{key:"on",value:function(m,u){var o=this;this.handlers||(this.handlers={});var l=this.handlers[m];return l||(l=this.handlers[m]=[]),l.push(u),{name:m,callback:u,un:function(d,k){return o.un(d,k)}}}},{key:"un",value:function(m,u){if(this.handlers){var o=this.handlers[m],l;if(o)if(u)for(l=o.length-1;l>=0;l--)o[l]==u&&o.splice(l,1);else o.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(m,u){var o=this,l=function p(){for(var d=arguments.length,k=new Array(d),w=0;w<d;w++)k[w]=arguments[w];u.apply(o,k),setTimeout(function(){o.un(m,p)},0)};return this.on(m,l)}},{key:"setDisabledEventEmissions",value:function(m){this._disabledEventEmissions=m}},{key:"_isDisabledEventEmission",value:function(m){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(m)}},{key:"fireEvent",value:function(m){for(var u=arguments.length,o=new Array(u>1?u-1:0),l=1;l<u;l++)o[l-1]=arguments[l];if(!(!this.handlers||this._isDisabledEventEmission(m))){var p=this.handlers[m];p&&p.forEach(function(d){d.apply(void 0,o)})}}}]),_}();v.default=L,V.exports=v.default},"./src/util/orientation.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=R;var O={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function C(x,W){return Object.prototype.hasOwnProperty.call(O,x)&&W?O[x]:x}var T=Symbol("isProxy");function R(x,W){return x[T]?x:new Proxy(x,{get:function(_,b,m){if(b===T)return!0;if(b==="domElement")return _;if(b==="style")return R(_.style,W);if(b==="canvas")return R(_.canvas,W);if(b==="getBoundingClientRect")return function(){return R(_.getBoundingClientRect.apply(_,arguments),W)};if(b==="getContext")return function(){return R(_.getContext.apply(_,arguments),W)};var u=_[C(b,W)];return typeof u=="function"?u.bind(_):u},set:function(_,b,m){return _[C(b,W)]=m,!0}})}V.exports=v.default},"./src/util/prevent-click.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=C;function O(T){T.stopPropagation(),document.body.removeEventListener("click",O,!0)}function C(T){document.body.addEventListener("click",O,!0)}V.exports=v.default},"./src/util/request-animation-frame.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var O=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(C,T){return setTimeout(C,1e3/60)}).bind(window);v.default=O,V.exports=v.default},"./src/util/silence-mode.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=O;function O(){var C=new AudioContext,T=C.createBufferSource();T.buffer=C.createBuffer(1,1,44100),T.connect(C.destination),T.start();var R="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",x=document.createElement("div");x.innerHTML='<audio x-webkit-airplay="deny"></audio>';var W=x.children.item(0);W.src=R,W.preload="auto",W.type="audio/mpeg",W.disableRemotePlayback=!0,W.play(),W.remove(),x.remove()}V.exports=v.default},"./src/util/style.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=O;function O(C,T){return Object.keys(T).forEach(function(R){C.style[R]!==T[R]&&(C.style[R]=T[R])}),C}V.exports=v.default},"./src/wavesurfer.js":(V,v,O)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var C=m(O("./src/util/index.js")),T=_(O("./src/drawer.multicanvas.js")),R=_(O("./src/webaudio.js")),x=_(O("./src/mediaelement.js")),W=_(O("./src/peakcache.js")),L=_(O("./src/mediaelement-webaudio.js"));function _(r){return r&&r.__esModule?r:{default:r}}function b(r){if(typeof WeakMap!="function")return null;var t=new WeakMap,s=new WeakMap;return(b=function(e){return e?s:t})(r)}function m(r,t){if(!t&&r&&r.__esModule)return r;if(r===null||g(r)!=="object"&&typeof r!="function")return{default:r};var s=b(t);if(s&&s.has(r))return s.get(r);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in r)if(h!=="default"&&Object.prototype.hasOwnProperty.call(r,h)){var P=e?Object.getOwnPropertyDescriptor(r,h):null;P&&(P.get||P.set)?Object.defineProperty(a,h,P):a[h]=r[h]}return a.default=r,s&&s.set(r,a),a}function u(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&o(r,t)}function o(r,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},o(r,t)}function l(r){var t=k();return function(){var a=w(r),e;if(t){var h=w(this).constructor;e=Reflect.construct(a,arguments,h)}else e=a.apply(this,arguments);return p(this,e)}}function p(r,t){if(t&&(g(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(r)}function d(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(r){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},w(r)}function E(r,t,s){return t=n(t),t in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function g(r){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(r)}function y(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function A(r,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,n(a.key),a)}}function c(r,t,s){return t&&A(r.prototype,t),s&&A(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r}function n(r){var t=i(r,"string");return g(t)==="symbol"?t:String(t)}function i(r,t){if(g(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var a=s.call(r,t||"default");if(g(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var f=function(r){u(s,r);var t=l(s);function s(a){var e;if(y(this,s),e=t.call(this),E(d(e),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:T.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),E(d(e),"backends",{MediaElement:x.default,WebAudio:R.default,MediaElementWebAudio:L.default}),E(d(e),"util",C),e.params=Object.assign({},e.defaultParams,a),e.params.splitChannelsOptions=Object.assign({},e.defaultParams.splitChannelsOptions,a.splitChannelsOptions),e.container=typeof a.container=="string"?document.querySelector(e.params.container):e.params.container,!e.container)throw new Error("Container element not found");if(e.params.mediaContainer==null?e.mediaContainer=e.container:typeof e.params.mediaContainer=="string"?e.mediaContainer=document.querySelector(e.params.mediaContainer):e.mediaContainer=e.params.mediaContainer,!e.mediaContainer)throw new Error("Media Container element not found");if(e.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(e.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(e.params.rtl===!0&&(e.params.vertical===!0?C.style(e.container,{transform:"rotateX(180deg)"}):C.style(e.container,{transform:"rotateY(180deg)"})),e.params.backgroundColor&&e.setBackgroundColor(e.params.backgroundColor),e.savedVolume=0,e.isMuted=!1,e.tmpEvents=[],e.currentRequest=null,e.arraybuffer=null,e.drawer=null,e.backend=null,e.peakCache=null,typeof e.params.renderer!="function")throw new Error("Renderer parameter is invalid");e.Drawer=e.params.renderer,e.params.backend=="AudioElement"&&(e.params.backend="MediaElement"),(e.params.backend=="WebAudio"||e.params.backend==="MediaElementWebAudio")&&!R.default.prototype.supportsWebAudio.call(null)&&(e.params.backend="MediaElement"),e.Backend=e.backends[e.params.backend],e.initialisedPluginList={},e.isDestroyed=!1,e.isReady=!1;var h=0;return e._onResize=C.debounce(function(){e.drawer.wrapper&&h!=e.drawer.wrapper.clientWidth&&!e.params.scrollParent&&(h=e.drawer.wrapper.clientWidth,h&&e.drawer.fireEvent("redraw"))},typeof e.params.responsive=="number"?e.params.responsive:100),p(e,d(e))}return c(s,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var h=this;return e.forEach(function(P){return h.addPlugin(P)}),e.forEach(function(P){P.deferInit||h.initPlugin(P.name)}),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var h=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach(function(M){h[M]=e.staticProps[M]});var P=e.instance,S=Object.getOwnPropertyNames(C.Observer.prototype);return S.forEach(function(M){P.prototype[M]=C.Observer.prototype[M]}),this[e.name]=new P(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if(typeof this[e].destroy!="function")throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(h){return e.destroyPlugin(h)})}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(h,P){setTimeout(function(){return e.seekTo(P)},0)}),this.drawer.on("scroll",function(h){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",h)})}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")}),this.backend.on("play",function(){return e.fireEvent("play")}),this.backend.on("pause",function(){return e.fireEvent("pause")}),this.backend.on("audioprocess",function(h){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",h)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){e.drawer.progress(e.backend.getPlayedPercents())}),this.backend.on("volume",function(){var h=e.getVolume();e.fireEvent("volume",h),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new W.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,h){var P=this;return this.params.ignoreSilenceMode&&C.ignoreSilenceMode(),this.fireEvent("interaction",function(){return P.play(e,h)}),this.backend.play(e,h)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var h=this.getDuration()||1,P=this.getCurrentTime()||0;P=Math.max(0,Math.min(h,P+(e||0))),this.seekAndCenter(P/h)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var h=this;if(typeof e!="number"||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return h.seekTo(e)});var P=this.params.backend==="WebAudio",S=this.backend.isPaused();P&&!S&&this.backend.pause();var M=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),P&&!S&&this.backend.play(),this.params.scrollParent=M,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){if(this.isMuted===!0){this.savedVolume=e;return}this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){if(e===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(e){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.params.splitChannelsOptions.channelColors[h]?this.params.splitChannelsOptions.channelColors[h].waveColor=e:this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(e,h){this.params.splitChannelsOptions.channelColors[h]?this.params.splitChannelsOptions.channelColors[h].progressColor=e:this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,C.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),h=this.drawer.getWidth(),P=e,S=0,M=Math.max(S+h,P);this.params.fillParent&&(!this.params.scrollParent||e<h)&&(P=h,S=0,M=P);var j;if(this.params.partialRender){var I=this.peakCache.addRangeToPeakCache(P,S,M),D;for(D=0;D<I.length;D++)j=this.backend.getPeaks(P,I[D][0],I[D][1]),this.drawer.drawPeaks(j,P,I[D][0],I[D][1])}else j=this.backend.getPeaks(P,S,M),this.drawer.drawPeaks(j,P,S,M);this.fireEvent("redraw",j,P)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var h=this;this.decodeArrayBuffer(e,function(P){h.isDestroyed||h.loadDecodedBuffer(P)})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var h=this,P=new FileReader;P.addEventListener("progress",function(S){return h.onProgress(S)}),P.addEventListener("load",function(S){return h.loadArrayBuffer(S.target.result)}),P.addEventListener("error",function(){return h.fireEvent("error","Error reading file")}),P.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,h,P,S){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),P){var M={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(P)===-1,"Peaks are not provided":!h,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof e!="string"},j=Object.keys(M).filter(function(I){return M[I]});j.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+j.join(`
	- `)),P=null)}switch(this.params.backend==="WebAudio"&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,h,S);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,h,P,S)}}},{key:"loadBuffer",value:function(e,h,P){var S=this,M=function(I){return I&&S.tmpEvents.push(S.once("ready",I)),S.getArrayBuffer(e,function(D){return S.loadArrayBuffer(D)})};if(h)this.backend.setPeaks(h,P),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",M));else return M()}},{key:"loadMediaElement",value:function(e,h,P,S){var M=this,j=e;if(typeof e=="string")this.backend.load(j,this.mediaContainer,h,P);else{var I=e;this.backend.loadElt(I,h),j=I.src}this.tmpEvents.push(this.backend.once("canplay",function(){M.backend.destroyed||(M.drawBuffer(),M.isReady=!0,M.fireEvent("ready"))}),this.backend.once("error",function(D){return M.fireEvent("error",D)})),h&&(this.backend.setPeaks(h,S),this.drawBuffer(),this.fireEvent("waveform-ready")),(!h||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(j,function(D){M.decodeArrayBuffer(D,function(N){M.backend.buffer=N,M.backend.setPeaks(null),M.drawBuffer(),M.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(e,h){var P=this;this.isDestroyed||(this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(S){!P.isDestroyed&&P.arraybuffer==e&&(h(S),P.arraybuffer=null)},function(){return P.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(e,h){var P=this,S=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),M=C.fetchFile(S);return this.currentRequest=M,this.tmpEvents.push(M.on("progress",function(j){P.onProgress(j)}),M.on("success",function(j){h(j),P.currentRequest=null}),M.on("error",function(j){P.fireEvent("error",j),P.currentRequest=null})),M}},{key:"onProgress",value:function(e){var h;e.lengthComputable?h=e.loaded/e.total:h=e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(h*100),e.target)}},{key:"exportPCM",value:function(e,h,P,S,M){e=e||1024,S=S||0,h=h||1e4,P=P||!1;var j=this.backend.getPeaks(e,S,M),I=[].map.call(j,function(D){return Math.round(D*h)/h});return new Promise(function(D,N){if(!P){var z=new Blob([JSON.stringify(I)],{type:"application/json;charset=utf-8"}),B=URL.createObjectURL(z);window.open(B),URL.revokeObjectURL(B)}D(I)})}},{key:"exportImage",value:function(e,h,P){return e||(e="image/png"),h||(h=1),P||(P="dataURL"),this.drawer.getImage(e,h,P)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(e){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(e){var h=new s(e);return h.init()}}]),s}(C.Observer);v.default=f,E(f,"VERSION","6.6.3"),E(f,"util",C),V.exports=v.default},"./src/webaudio.js":(V,v,O)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var C=R(O("./src/util/index.js"));function T(n){if(typeof WeakMap!="function")return null;var i=new WeakMap,f=new WeakMap;return(T=function(t){return t?f:i})(n)}function R(n,i){if(!i&&n&&n.__esModule)return n;if(n===null||x(n)!=="object"&&typeof n!="function")return{default:n};var f=T(i);if(f&&f.has(n))return f.get(n);var r={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=t?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=n[s]}return r.default=n,f&&f.set(n,r),r}function x(n){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},x(n)}function W(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function L(n,i){for(var f=0;f<i.length;f++){var r=i[f];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,w(r.key),r)}}function _(n,i,f){return i&&L(n.prototype,i),f&&L(n,f),Object.defineProperty(n,"prototype",{writable:!1}),n}function b(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&m(n,i)}function m(n,i){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},m(n,i)}function u(n){var i=p();return function(){var r=d(n),t;if(i){var s=d(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return o(this,t)}}function o(n,i){if(i&&(x(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(n)}function l(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(n){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},d(n)}function k(n,i,f){return i=w(i),i in n?Object.defineProperty(n,i,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[i]=f,n}function w(n){var i=E(n,"string");return x(i)==="symbol"?i:String(i)}function E(n,i){if(x(n)!=="object"||n===null)return n;var f=n[Symbol.toPrimitive];if(f!==void 0){var r=f.call(n,i||"default");if(x(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}var g="playing",y="paused",A="finished",c=function(n){b(f,n);var i=u(f);function f(r){var t,s,a;return W(this,f),a=i.call(this),k(l(a),"audioContext",null),k(l(a),"stateBehaviors",(t={},k(t,g,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var h=this.getDuration();return this.getCurrentTime()/h||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),k(t,y,{init:function(){},getPlayedPercents:function(){var h=this.getDuration();return this.getCurrentTime()/h||0},getCurrentTime:function(){return this.startPosition}}),k(t,A,{init:function(){this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t)),a.params=r,a.ac=r.audioContext||(a.supportsWebAudio()?a.getAudioContext():{}),a.lastPlay=a.ac.currentTime,a.startPosition=0,a.scheduledPause=null,a.states=(s={},k(s,g,Object.create(a.stateBehaviors[g])),k(s,y,Object.create(a.stateBehaviors[y])),k(s,A,Object.create(a.stateBehaviors[A])),s),a.buffer=null,a.filters=[],a.gainNode=null,a.mergedPeaks=null,a.offlineAc=null,a.peaks=null,a.playbackRate=1,a.analyser=null,a.scriptNode=null,a.source=null,a.splitPeaks=[],a.state=null,a.explicitDuration=r.duration,a.sinkStreamDestination=null,a.sinkAudioElement=null,a.destroyed=!1,a}return _(f,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(t){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(y),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(t){t&&t.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];this.setFilters(s)}},{key:"setFilters",value:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce(function(s,a){return s.connect(a),a},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor&&(this.scriptNode=this.params.audioScriptProcessor,this.scriptNode.connect(this.ac.destination))}},{key:"addOnAudioProcess",value:function(){var t=this,s=function a(){var e=t.getCurrentTime();e>=t.getDuration()&&t.state!==t.states[A]?(t.setState(A),t.fireEvent("pause")):e>=t.scheduledPause&&t.state!==t.states[y]?t.pause():t.state===t.states[g]&&(t.fireEvent("audioprocess",e),C.frame(a)())};s()}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(t){return t?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(t)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"setVolume",value:function(t){this.gainNode.gain.setValueAtTime(t,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(t,s,a){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(t,function(e){return s(e)},a):this.offlineAc.decodeAudioData(t).then(function(e){return s(e)}).catch(function(e){return a(e)})}},{key:"setPeaks",value:function(t,s){s!=null&&(this.explicitDuration=s),this.peaks=t}},{key:"setLength",value:function(t){if(!(this.mergedPeaks&&t==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var s=this.buffer?this.buffer.numberOfChannels:1,a;for(a=0;a<s;a++)this.splitPeaks[a]=[],this.splitPeaks[a][2*(t-1)]=0,this.splitPeaks[a][2*(t-1)+1]=0;this.mergedPeaks[2*(t-1)]=0,this.mergedPeaks[2*(t-1)+1]=0}}},{key:"getPeaks",value:function(t,s,a){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(s=s||0,a=a||t-1,this.setLength(t),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var e=this.createBuffer(1,4096,this.sampleRate);this.buffer=e.buffer}var h=this.buffer.length/t,P=~~(h/10)||1,S=this.buffer.numberOfChannels,M;for(M=0;M<S;M++){var j=this.splitPeaks[M],I=this.buffer.getChannelData(M),D=void 0;for(D=s;D<=a;D++){var N=~~(D*h),z=~~(N+h),B=I[N],X=B,F=void 0;for(F=N;F<z;F+=P){var U=I[F];U>X&&(X=U),U<B&&(B=U)}j[2*D]=X,j[2*D+1]=B,(M==0||X>this.mergedPeaks[2*D])&&(this.mergedPeaks[2*D]=X),(M==0||B<this.mergedPeaks[2*D+1])&&(this.mergedPeaks[2*D+1]=B)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode&&this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[g]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(t,s){if(this.buffer)return this.scheduledPause=null,t==null&&(t=this.getCurrentTime(),t>=this.getDuration()&&(t=0)),s==null&&(s=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[A]&&this.setState(y),{start:t,end:s}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(t,s){if(this.buffer){this.createSource();var a=this.seekTo(t,s);t=a.start,s=a.end,this.scheduledPause=s,this.source.start(0,t),this.resumeAudioContext(),this.setState(g),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(y),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(t){this.scheduledPause=t}}]),f}(C.Observer);v.default=c,V.exports=v.default},"./node_modules/debounce/index.js":V=>{function v(O,C,T){var R,x,W,L,_;C==null&&(C=100);function b(){var u=Date.now()-L;u<C&&u>=0?R=setTimeout(b,C-u):(R=null,T||(_=O.apply(W,x),W=x=null))}var m=function(){W=this,x=arguments,L=Date.now();var u=T&&!R;return R||(R=setTimeout(b,C)),u&&(_=O.apply(W,x),W=x=null),_};return m.clear=function(){R&&(clearTimeout(R),R=null)},m.flush=function(){R&&(_=O.apply(W,x),W=x=null,clearTimeout(R),R=null)},m}v.debounce=v,V.exports=v}},Y={};function H(V){var v=Y[V];if(v!==void 0)return v.exports;var O=Y[V]={exports:{}};return Q[V](O,O.exports,H),O.exports}var K=H("./src/wavesurfer.js");return K})())})(me);const ge=ue(ae);var se={},be={get exports(){return se},set exports(q){se=q}};/*!
 * wavesurfer.js timeline plugin 6.6.3 (2023-04-04)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(q,G){(function(Y,H){q.exports=H()})(self,()=>(()=>{var Q={"./src/plugin/timeline/index.js":(V,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;function O(b){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},O(b)}function C(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}function T(b,m){for(var u=0;u<m.length;u++){var o=m[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(b,W(o.key),o)}}function R(b,m,u){return m&&T(b.prototype,m),u&&T(b,u),Object.defineProperty(b,"prototype",{writable:!1}),b}function x(b,m,u){return m=W(m),m in b?Object.defineProperty(b,m,{value:u,enumerable:!0,configurable:!0,writable:!0}):b[m]=u,b}function W(b){var m=L(b,"string");return O(m)==="symbol"?m:String(m)}function L(b,m){if(O(b)!=="object"||b===null)return b;var u=b[Symbol.toPrimitive];if(u!==void 0){var o=u.call(b,m||"default");if(O(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(b)}var _=function(){function b(m,u){var o=this;if(C(this,b),x(this,"_onScroll",function(){o.wrapper&&o.drawer.wrapper&&(o.wrapper.scrollLeft=o.drawer.wrapper.scrollLeft)}),x(this,"_onRedraw",function(){return o.render()}),x(this,"_onReady",function(){var l=o.wavesurfer;o.drawer=l.drawer,o.pixelRatio=l.drawer.params.pixelRatio,o.maxCanvasWidth=l.drawer.maxCanvasWidth||l.drawer.width,o.maxCanvasElementWidth=l.drawer.maxCanvasElementWidth||Math.round(o.maxCanvasWidth/o.pixelRatio),l.drawer.wrapper.addEventListener("scroll",o._onScroll),l.on("redraw",o._onRedraw),l.on("zoom",o._onZoom),o.render()}),x(this,"_onWrapperClick",function(l){l.preventDefault();var p="offsetX"in l?l.offsetX:l.layerX;o.fireEvent("click",p/o.wrapper.scrollWidth||0)}),this.container=typeof m.container=="string"?document.querySelector(m.container):m.container,!this.container)throw new Error("No container for wavesurfer timeline");this.wavesurfer=u,this.util=u.util,this.params=Object.assign({},{height:20,notchPercentHeight:90,labelPadding:5,unlabeledNotchColor:"#c0c0c0",primaryColor:"#000",secondaryColor:"#c0c0c0",primaryFontColor:"#000",secondaryFontColor:"#000",fontFamily:"Arial",fontSize:10,duration:null,zoomDebounce:!1,formatTimeCallback:this.defaultFormatTimeCallback,timeInterval:this.defaultTimeInterval,primaryLabelInterval:this.defaultPrimaryLabelInterval,secondaryLabelInterval:this.defaultSecondaryLabelInterval,offset:0},m),this.canvases=[],this.wrapper=null,this.drawer=null,this.pixelRatio=null,this.maxCanvasWidth=null,this.maxCanvasElementWidth=null,this._onZoom=this.params.zoomDebounce?this.wavesurfer.util.debounce(function(){return o.render()},this.params.zoomDebounce):function(){return o.render()}}return R(b,[{key:"init",value:function(){this.wavesurfer.isReady?this._onReady():this.wavesurfer.once("ready",this._onReady)}},{key:"destroy",value:function(){this.unAll(),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.un("zoom",this._onZoom),this.wavesurfer.un("ready",this._onReady),this.wavesurfer.drawer.wrapper.removeEventListener("scroll",this._onScroll),this.wrapper&&this.wrapper.parentNode&&(this.wrapper.removeEventListener("click",this._onWrapperClick),this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null)}},{key:"createWrapper",value:function(){var u=this.wavesurfer.params;this.container.innerHTML="",this.wrapper=this.container.appendChild(document.createElement("timeline")),this.util.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:"".concat(this.params.height,"px")}),(u.fillParent||u.scrollParent)&&this.util.style(this.wrapper,{width:"100%",overflowX:"hidden",overflowY:"hidden"}),this.wrapper.addEventListener("click",this._onWrapperClick)}},{key:"render",value:function(){this.wrapper||this.createWrapper(),this.updateCanvases(),this.updateCanvasesPositioning(),this.renderCanvases()}},{key:"addCanvas",value:function(){var u=this.wrapper.appendChild(document.createElement("canvas"));this.canvases.push(u),this.util.style(u,{position:"absolute",zIndex:4})}},{key:"removeCanvas",value:function(){var u=this.canvases.pop();u.parentElement.removeChild(u)}},{key:"updateCanvases",value:function(){for(var u=Math.round(this.drawer.wrapper.scrollWidth),o=Math.ceil(u/this.maxCanvasElementWidth);this.canvases.length<o;)this.addCanvas();for(;this.canvases.length>o;)this.removeCanvas()}},{key:"updateCanvasesPositioning",value:function(){var u=this,o=this.canvases.length;this.canvases.forEach(function(l,p){var d=p===o-1?u.drawer.wrapper.scrollWidth-u.maxCanvasElementWidth*(o-1):u.maxCanvasElementWidth;l.width=d*u.pixelRatio,l.height=(u.params.height+1)*u.pixelRatio,u.util.style(l,{width:"".concat(d,"px"),height:"".concat(u.params.height,"px"),left:"".concat(p*u.maxCanvasElementWidth,"px")})})}},{key:"renderCanvases",value:function(){var u=this,o=this.params.duration||this.wavesurfer.backend.getDuration();if(!(o<=0)){var l=this.wavesurfer.params,p=this.params.fontSize*l.pixelRatio,d=parseInt(o,10)+1,k=l.fillParent&&!l.scrollParent?this.drawer.getWidth():this.drawer.wrapper.scrollWidth*l.pixelRatio,w=this.params.height*this.pixelRatio,E=this.params.height*(this.params.notchPercentHeight/100)*this.pixelRatio,g=k/o,y=this.params.formatTimeCallback,A=function(P){return typeof P=="function"?P(g):P},c=A(this.params.timeInterval),n=A(this.params.primaryLabelInterval),i=A(this.params.secondaryLabelInterval),f=g*this.params.offset,r=0,t,s=[],a=this.params.offset<0?d-this.params.offset:d;for(t=0;t<a/c;t++)s.push([t,r,f]),r+=c,f+=g*c;var e=function(P){s.forEach(function(S){P(S[0],S[1],S[2])})};this.setFillStyles(this.params.primaryColor),this.setFonts("".concat(p,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.primaryFontColor),e(function(h,P,S){h%n===0&&(u.fillRect(S,0,1,w),u.fillText(y(P,g),S+u.params.labelPadding*u.pixelRatio,w))}),this.setFillStyles(this.params.secondaryColor),this.setFonts("".concat(p,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.secondaryFontColor),e(function(h,P,S){h%i===0&&(u.fillRect(S,0,1,w),u.fillText(y(P,g),S+u.params.labelPadding*u.pixelRatio,w))}),this.setFillStyles(this.params.unlabeledNotchColor),e(function(h,P,S){h%i!==0&&h%n!==0&&u.fillRect(S,0,1,E)})}}},{key:"setFillStyles",value:function(u){this.canvases.forEach(function(o){var l=o.getContext("2d");l&&(l.fillStyle=u)})}},{key:"setFonts",value:function(u){this.canvases.forEach(function(o){var l=o.getContext("2d");l&&(l.font=u)})}},{key:"fillRect",value:function(u,o,l,p){var d=this;this.canvases.forEach(function(k,w){var E=w*d.maxCanvasWidth,g={x1:Math.max(u,w*d.maxCanvasWidth),y1:o,x2:Math.min(u+l,w*d.maxCanvasWidth+k.width),y2:o+p};if(g.x1<g.x2){var y=k.getContext("2d");y&&y.fillRect(g.x1-E,g.y1,g.x2-g.x1,g.y2-g.y1)}})}},{key:"fillText",value:function(u,o,l){var p,d=0;this.canvases.forEach(function(k){var w=k.getContext("2d");if(w){var E=w.canvas.width;if(d>o+p)return;d+E>o&&w&&(p=w.measureText(u).width,w.fillText(u,o-d,l)),d+=E}})}},{key:"defaultFormatTimeCallback",value:function(u,o){if(u/60>1){var l=parseInt(u/60,10);return u=parseInt(u%60,10),u=u<10?"0"+u:u,"".concat(l,":").concat(u)}return Math.round(u*1e3)/1e3}},{key:"defaultTimeInterval",value:function(u){return u>=25?1:u*5>=25?5:u*15>=25?15:Math.ceil(.5/u)*60}},{key:"defaultPrimaryLabelInterval",value:function(u){return u>=25?10:u*5>=25?6:(u*15>=25,4)}},{key:"defaultSecondaryLabelInterval",value:function(u){return u>=25?5:(u*5>=25||u*15>=25,2)}}],[{key:"create",value:function(u){return{name:"timeline",deferInit:u&&u.deferInit?u.deferInit:!1,params:u,instance:b}}}]),b}();v.default=_,V.exports=v.default}},Y={};function H(V){var v=Y[V];if(v!==void 0)return v.exports;var O=Y[V]={exports:{}};return Q[V](O,O.exports,H),O.exports}var K=H("./src/plugin/timeline/index.js");return K})())})(be);const we=ue(se),Ae={props:{voiceSrc:{type:String,default:""}},data(){return{wavesurfer:null}},mounted(){this.init()},beforeDestroy(){this.wavesurfer&&this.wavesurfer.destroy(),this.wavesurfer=null},methods:{init(){const q=this.$refs.waveformRef;q.addEventListener("click",()=>{console.log("点击容器")}),this.wavesurfer=ge.create({container:q,cursorColor:"#304156",waveColor:"#ddd",progressColor:"#304156",backend:"MediaElement",autoCenter:!1,plugins:[we.create({container:this.$refs.waveTimelineRef})]}),this.wavesurfer.load(this.voiceSrc)},rebroadcast(){this.wavesurfer.play(0)},handleStop(){this.wavesurfer.stop()}}},Pe={ref:"waveformRef"},ke={ref:"waveTimelineRef"},Ce=ie("i",{class:"el-icon-video-play"},null,-1);function _e(q,G,Q,Y,H,K){const V=pe("el-button");return le(),fe("div",null,[ie("div",Pe,null,512),ie("div",ke,null,512),Z(V,{type:"primary",onClick:G[0]||(G[0]=v=>H.wavesurfer.skip(-1))},{default:ee(()=>[J("后退")]),_:1}),Z(V,{type:"primary",onClick:G[1]||(G[1]=v=>H.wavesurfer.playPause())},{default:ee(()=>[Ce,J(" 播放 / 暂停 ")]),_:1}),J(),Z(V,{type:"primary",onClick:G[2]||(G[2]=v=>H.wavesurfer.skip(1))},{default:ee(()=>[J("前进")]),_:1}),Z(V,{type:"primary",onClick:K.rebroadcast},{default:ee(()=>[J("重播")]),_:1},8,["onClick"]),Z(V,{type:"primary",onClick:K.handleStop},{default:ee(()=>[J("停止")]),_:1},8,["onClick"])])}const Ee=ve(Ae,[["render",_e]]),Oe=""+new URL("demo-34be75cc.wav",import.meta.url).href,Se={__name:"wavesurfer",setup(q){return(G,Q)=>(le(),fe("div",null,[Z(Ee,{voiceSrc:ye(Oe)},null,8,["voiceSrc"])]))}};export{Se as default};
